!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t,n){e.exports=n.p+"images/facebook.png"},function(e,t,n){e.exports=n.p+"images/gamepad.png"},function(e,t,n){e.exports=n.p+"images/wikipedia.png"},function(e,t,n){e.exports=n.p+"images/spotify.png"},function(e,t,n){e.exports=n.p+"images/router-x2.png"},function(e,t,n){e.exports=n.p+"images/rayBeam.png"},function(e,t,n){e.exports=n.p+"images/boss.png"},function(e,t,n){e.exports=n.p+"images/explosion.png"},function(e,t,n){e.exports=n.p+"sounds/shoot.wav"},function(e,t,n){e.exports=n.p+"sounds/explosion.wav"},function(e,t,n){e.exports=n.p+"images/sound.png"},function(e,t,n){e.exports=n.p+"images/text.png"},function(e,t,n){e.exports=n.p+"images/video.png"},function(e,t,n){e.exports=n.p+"images/image.png"},function(e,t){var n=n||{};n.VERSION="0.0.1",n.plugins=void 0,n.custom=void 0,n.create=function(e,t,i,a,r){var o={};if(o.canvas=document.createElement("canvas"),o.canvas.setAttribute("width",1*e),o.canvas.setAttribute("height",1*t),o.canvas.style.backgroundColor="black",document.body.appendChild(o.canvas),o.canvas.ctx=o.canvas.getContext("2d"),o.stage=function(){var e={};return d(e),e.stage=!0,e.width=o.canvas.width,e.height=o.canvas.height,e.x=0,e.y=0,e.parent=void 0,e}(),o.pointer=function(){var e={_x:0,_y:0};return Object.defineProperties(e,{x:{get:function(){return e._x/o.scale},enumerable:!0,configurable:!0},y:{get:function(){return e._y/o.scale},enumerable:!0,configurable:!0},centerX:{get:function(){return e.x},enumerable:!0,configurable:!0},centerY:{get:function(){return e.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:e.x,y:e.y}},enumerable:!0,configurable:!0}}),e.isDown=!1,e.isUp=!0,e.tapped=!1,e.downTime=0,e.elapsedTime=0,e.press=void 0,e.release=void 0,e.tap=void 0,e.dragSprite=null,e.dragOffsetX=0,e.dragOffsetY=0,e.moveHandler=function(t){e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,t.preventDefault()},e.touchmoveHandler=function(t){e._x=t.targetTouches[0].pageX-o.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-o.canvas.offsetTop,t.preventDefault()},e.downHandler=function(t){e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.touchstartHandler=function(t){e._x=t.targetTouches[0].pageX-o.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-o.canvas.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.upHandler=function(t){e.elapsedTime=Math.abs(e.downTime-Date.now()),e.elapsedTime<=200&&(e.tapped=!0,e.tap&&e.tap()),e.isUp=!0,e.isDown=!1,e.release&&e.release(),t.preventDefault()},o.canvas.addEventListener("mousemove",e.moveHandler.bind(e),!1),o.canvas.addEventListener("mousedown",e.downHandler.bind(e),!1),window.addEventListener("mouseup",e.upHandler.bind(e),!1),o.canvas.addEventListener("touchmove",e.touchmoveHandler.bind(e),!1),o.canvas.addEventListener("touchstart",e.touchstartHandler.bind(e),!1),window.addEventListener("touchend",e.upHandler.bind(e),!1),o.canvas.style.touchAction="none",e.hitTestSprite=function(t){var n=!1;if(t.circular){var i=e.x-(t.gx+t.halfWidth),a=e.y-(t.gy+t.halfHeight);n=Math.sqrt(i*i+a*a)<t.radius}else{var r=t.gx,o=t.gx+t.width,s=t.gy,l=t.gy+t.height;n=e.x>r&&e.x<o&&e.y>s&&e.y<l}return n},e.updateDragAndDrop=function(){if(e.isDown)if(null===e.dragSprite)for(var t=o.draggableSprites.length-1;t>-1;t--){var n=o.draggableSprites[t];if(n.draggable&&e.hitTestSprite(n)){e.dragOffsetX=e.x-n.gx,e.dragOffsetY=e.y-n.gy,e.dragSprite=n;var i=n.parent.children;i.splice(i.indexOf(n),1),i.push(n),o.draggableSprites.splice(o.draggableSprites.indexOf(n),1),o.draggableSprites.push(n);break}}else e.dragSprite.x=e.x-e.dragOffsetX,e.dragSprite.y=e.y-e.dragOffsetY;e.isUp&&(e.dragSprite=null),o.draggableSprites.some(function(t){return t.draggable&&e.hitTestSprite(t)?(o.canvas.style.cursor="pointer",!0):(o.canvas.style.cursor="auto",!1)})},e}(),o.key=function(){var e={};return e.leftArrow=f(37),e.upArrow=f(38),e.rightArrow=f(39),e.downArrow=f(40),e.space=f(32),e}(),o.buttons=[],o.dragAndDrop=!1,o.draggableSprites=[],o.tweens=[],o.state=void 0,o.load=r||void 0,o.setup=i||void 0,void 0===o.setup)throw new Error("Please supply the setup function in the constructor");function s(){if(requestAnimationFrame(s,o.canvas),void 0===o._fps)c(),o.render(o.canvas,0);else{var e=Date.now(),t=e-o._startTime;for(t>1e3&&(t=o._frameDuration),o._startTime=e,o._lag+=t;o._lag>=o._frameDuration;)l(),c(),o._lag-=o._frameDuration;var n=o._lag/o._frameDuration;o.render(o.canvas,n)}}function l(){o.stage.children.forEach(function(e){!function e(t){t._previousX=t.x;t._previousY=t.y;t.children&&t.children.length>0&&t.children.forEach(function(t){e(t)})}(e)})}function c(){if(o.buttons.length>0){o.canvas.style.cursor="auto";for(var e=o.buttons.length-1;e>=0;e--){var t=o.buttons[e];t.update(o.pointer,o.canvas),"over"!==t.state&&"down"!==t.state||t.stage||(o.canvas.style.cursor="pointer")}}if(o.dragAndDrop&&o.pointer.updateDragAndDrop(),o.state&&!o.paused&&o.state(),0!==o.updateFunctions.length)for(var n=0;n<o.updateFunctions.length;n++){(0,o.updateFunctions[n])()}}function d(e){e.x=0,e.y=0,e.vx=0,e.vy=0,e.width=0,e.height=0,e.scaleX=1,e.scaleY=1,e.pivotX=.5,e.pivotY=.5,e.rotation=0,e.visible=!0,e.parent=void 0,e.stage=!1,e.shadow=!1,e.shadowColor="rgba(100, 100, 100, 0.5)",e.shadowOffsetX=3,e.shadowOffsetY=3,e.shadowBlur=3,e.blendMode=void 0,e._alpha=1,e._draggable=void 0,e._layer=0,e._circular=!1,e._interactive=!1,e._previousX=void 0,e._previousY=void 0,e.children=[],e.addChild=function(t){t.parent&&t.parent.removeChild(t),t.parent=e,e.children.push(t)},e.removeChild=function(t){if(t.parent!==e)throw new Error(t+"is not a child of "+e);e.children.splice(e.children.indexOf(t),1)},e.swapChildren=function(t,n){var i=e.children.indexOf(t),a=e.children.indexOf(n);if(-1===i||-1===a)throw new Error(child+" Both objects must be a child of the caller "+e);t.childIndex=a,n.childIndex=i,e.children[i]=n,e.children[a]=t},e.add=function(t){var n=Array.prototype.slice.call(arguments);n.length>1?n.forEach(function(t){e.addChild(t)}):e.addChild(n[0])},e.remove=function(t){var n=Array.prototype.slice.call(arguments);n.length>1?n.forEach(function(t){e.removeChild(t)}):e.removeChild(n[0])},e.setPosition=function(t,n){e.x=t,e.y=n};var t=e;e.putCenter=function(n,i,a){i=i||0,a=a||0,n.x=t.x+t.halfWidth-n.halfWidth+i,n.y=t.y+t.halfHeight-n.halfHeight+a,e.compensateForParentPosition(t,n)},e.putTop=function(n,i,a){i=i||0,a=a||0,n.x=t.x+t.halfWidth-n.halfWidth+i,n.y=t.y-n.height+a,e.compensateForParentPosition(t,n)},e.putRight=function(n,i,a){i=i||0,a=a||0,n.x=t.x+t.width+i,n.y=t.y+t.halfHeight-n.halfHeight+a,e.compensateForParentPosition(t,n)},e.putBottom=function(n,i,a){i=i||0,a=a||0,n.x=t.x+t.halfWidth-n.halfWidth+i,n.y=t.y+t.height+a,e.compensateForParentPosition(t,n)},e.putLeft=function(n,i,a){i=i||0,a=a||0,n.x=t.x-n.width+i,n.y=t.y+t.halfHeight-n.halfHeight+a,e.compensateForParentPosition(t,n)},e.compensateForParentPosition=function(e,t){0===t.parent.gx&&0===t.parent.gy||(t.x-=e.gx,t.y-=e.gy)},Object.defineProperties(e,{gx:{get:function(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get:function(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:e.x,y:e.y}},enumerable:!0,configurable:!0},alpha:{get:function(){return e.parent._alpha*e._alpha},set:function(t){e._alpha=t},enumerable:!0,configurable:!0},halfWidth:{get:function(){return e.width/2},enumerable:!0,configurable:!0},halfHeight:{get:function(){return e.height/2},enumerable:!0,configurable:!0},centerX:{get:function(){return e.x+e.halfWidth},enumerable:!0,configurable:!0},centerY:{get:function(){return e.y+e.halfHeight},enumerable:!0,configurable:!0},layer:{get:function(){return e._layer},set:function(t){e._layer=t,e.parent.children.sort(p)},enumerable:!0,configurable:!0},circular:{get:function(){return e._circular},set:function(t){!0===t&&!1===e._circular&&(u(e),e._circular=!0),!1===t&&!0===e._circular&&(delete e.diameter,delete e.radius,e._circular=!1)},enumerable:!0,configurable:!0},draggable:{get:function(){return e._draggable},set:function(t){!0===t&&(o.draggableSprites.push(e),e._draggable=!0,!1===o.dragAndDrop&&(o.dragAndDrop=!0)),!1===t&&o.draggableSprites.splice(o.draggableSprites.indexOf(e),1)},enumerable:!0,configurable:!0},interactive:{get:function(){return e._interactive},set:function(t){!0===t&&(h(e),e._interactive=!0),!1===t&&(o.buttons.splice(o.buttons.indexOf(e),1),e._interactive=!1)},enumerable:!0,configurable:!0},localBounds:{get:function(){return{x:0,y:0,width:e.width,height:e.height}},enumerable:!0,configurable:!0},globalBounds:{get:function(){return rectangle={x:e.gx,y:e.gy,width:e.gx+e.width,height:e.gy+e.height},rectangle},enumerable:!0,configurable:!0},empty:{get:function(){return 0===e.children.length},enumerable:!0,configurable:!0}})}function u(e){Object.defineProperties(e,{diameter:{get:function(){return e.width},set:function(t){e.width=t,e.height=t},enumerable:!0,configurable:!0},radius:{get:function(){return e.width/2},set:function(t){e.width=2*t,e.height=2*t},enumerable:!0,configurable:!0}})}function h(e){e.press=e.press||void 0,e.release=e.release||void 0,e.over=e.over||void 0,e.out=e.out||void 0,e.tap=e.tap||void 0,e.state="up",e.action="",e.pressed=!1,e.enabled=!0,e.hoverOver=!1,o.buttons.push(e),e.update=function(t,n){if(e.enabled){var i=o.pointer.hitTestSprite(e);t.isUp&&(e.state="up","button"===e.subtype&&e.show(0)),i&&(e.state="over",e.frames&&3===e.frames.length&&"button"===e.subtype&&e.show(1),t.isDown&&(e.state="down","button"===e.subtype&&(3===e.frames.length?e.show(2):e.show(1)))),"down"===e.state&&(e.pressed||(e.press&&e.press(),e.pressed=!0,e.action="pressed")),"over"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released",o.pointer.tapped&&e.tap&&e.tap()),e.hoverOver||(e.over&&e.over(),e.hoverOver=!0)),"up"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released"),e.hoverOver&&(e.out&&e.out(),e.hoverOver=!1))}}}function f(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t}function p(e,t){return e.layer<t.layer?-1:(e.layer,t.layer,1)}return o.assetFilePaths=a||void 0,o.paused=!1,o._fps=60,o._startTime=Date.now(),o._frameDuration=1e3/o._fps,o._lag=0,o.interpolate=!0,o.updateFunctions=[],o.scale=1,o.start=function(){o.assetFilePaths?(o.assets.whenLoaded=function(){o.state=void 0,o.setup()},o.assets.load(o.assetFilePaths),o.load&&(o.state=o.load)):o.setup(),s()},o.pause=function(){o.paused=!0},o.resume=function(){o.paused=!1},o.hidePointer=function(){o.canvas.style.cursor="none"},o.showPointer=function(){o.canvas.style.cursor="auto"},Object.defineProperties(o,{fps:{get:function(){return o._fps},set:function(e){o._fps=e,o._startTime=Date.now(),o._frameDuration=1e3/o._fps},enumerable:!0,configurable:!0},backgroundColor:{set:function(e){o.canvas.style.backgroundColor=e},enumerable:!0,configurable:!0}}),o.remove=function(e){var t=Array.prototype.slice.call(arguments);if(t[0]instanceof Array){var n=t[0];if(n.length>0)for(var i=n.length-1;i>=0;i--){var a=n[i];a.parent.removeChild(a),n.splice(n.indexOf(a),1)}}else t.length>1?t.forEach(function(e){e.parent.removeChild(e)}):t[0].parent.removeChild(t[0])},o.group=function(e){var t={};(d(t),t.addChild=function(e){e.parent&&e.parent.removeChild(e),e.parent=t,t.children.push(e),t.calculateSize()},t.removeChild=function(e){if(e.parent!==t)throw new Error(e+"is not a child of "+t);t.children.splice(t.children.indexOf(e),1),t.calculateSize()},t.calculateSize=function(){t.children.length>0&&(t._newWidth=0,t._newHeight=0,t.children.forEach(function(e){e.x+e.width>t._newWidth&&(t._newWidth=e.x+e.width),e.y+e.height>t._newHeight&&(t._newHeight=e.y+e.height)}),t.width=t._newWidth,t.height=t._newHeight)},o.stage.addChild(t),e)&&Array.prototype.slice.call(arguments).forEach(function(e){t.addChild(e)});return t},o.rectangle=function(e,t,n,i,a,r,s){var l={};return d(l),l.mask=!1,l.width=e||32,l.height=t||32,l.fillStyle=n||"red",l.strokeStyle=i||"none",l.lineWidth=a||0,l.x=r||0,l.y=s||0,o.stage.addChild(l),l.render=function(e){e.strokeStyle=l.strokeStyle,e.lineWidth=l.lineWidth,e.fillStyle=l.fillStyle,e.beginPath(),e.rect(-l.width*l.pivotX,-l.height*l.pivotY,l.width,l.height),!0===l.mask?e.clip():("none"!==l.strokeStyle&&e.stroke(),"none"!==l.fillStyle&&e.fill())},l},o.circle=function(e,t,n,i,a,r){var s={};return d(s),s.mask=!1,s.width=e||32,s.height=e||32,s.fillStyle=t||"red",s.strokeStyle=n||"none",s.lineWidth=i||"none",s.x=a||0,s.y=r||0,o.stage.addChild(s),u(s),s.render=function(e){e.strokeStyle=s.strokeStyle,e.lineWidth=s.lineWidth,e.fillStyle=s.fillStyle,e.beginPath(),e.arc(s.radius+-s.diameter*s.pivotX,s.radius+-s.diameter*s.pivotY,s.radius,0,2*Math.PI,!1),!0===s.mask?e.clip():("none"!==s.strokeStyle&&e.stroke(),"none"!==s.fillStyle&&e.fill())},s},o.line=function(e,t,n,i,a,r){var s={};return d(s),n||0===n||(n=0),i||0===i||(i=0),a||0===a||(a=32),r||0===r||(r=32),s.ax=n,s.ay=i,s.bx=a,s.by=r,s.strokeStyle=e||"red",s.lineWidth=t||1,s.lineJoin="round",o.stage.addChild(s),s.render=function(e){e.strokeStyle=s.strokeStyle,e.lineWidth=s.lineWidth,e.lineJoin=s.lineJoin,e.beginPath(),e.moveTo(s.ax,s.ay),e.lineTo(s.bx,s.by),"none"!==s.strokeStyle&&e.stroke(),"none"!==s.fillStyle&&e.fill()},s},o.text=function(e,t,n,i,a){var r={};return d(r),r.content=e||"Hello!",r.font=t||"12px sans-serif",r.fillStyle=n||"red",r.textBaseline="top",Object.defineProperties(r,{width:{get:function(){return o.canvas.ctx.measureText(r.content).width},enumerable:!0,configurable:!0},height:{get:function(){return o.canvas.ctx.measureText("M").width},enumerable:!0,configurable:!0}}),o.stage.addChild(r),r.x=i||0,r.y=a||0,r.render=function(e){e.strokeStyle=r.strokeStyle,e.lineWidth=r.lineWidth,e.fillStyle=r.fillStyle,0===r.width&&(r.width=e.measureText(r.content).width),0===r.height&&(r.height=e.measureText("M").width),e.translate(-r.width*r.pivotX,-r.height*r.pivotY),e.font=r.font,e.textBaseline=r.textBaseline,e.fillText(r.content,0,0)},r},o.frame=function(e,t,n,i,a){var r={};return r.image=e,r.x=t,r.y=n,r.width=i,r.height=a,r},o.frames=function(e,t,n,i){var a={};return a.image=e,a.data=t,a.width=n,a.height=i,a},o.filmstrip=function(e,t,n,i){for(var a=o.assets[e].source,r=[],s=a.width/t,l=s*(a.height/n),c=0;c<l;c++){var d,u;d=c%s*t,u=Math.floor(c/s)*n,i&&i>0&&(d+=i+i*c%s,u+=i+i*Math.floor(c/s)),r.push([d,u])}return o.frames(e,r,t,n)},o.sprite=function(e){var t={};if(void 0===e)throw new Error("Sprites require a source");return d(t),t.frames=[],t.loop=!0,t._currentFrame=0,t.setTexture=function(e){if(e.image)if(e.image&&!e.data){if(!(o.assets[e.image].source instanceof Image))throw new Error(e.image+" is not an image file");t.source=o.assets[e.image].source,t.sourceX=e.x,t.sourceY=e.y,t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height}else e.image&&e.data&&(t.source=o.assets[e.image].source,t.frames=e.data,t.sourceX=t.frames[0][0],t.sourceY=t.frames[0][1],t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height);else e instanceof Array?(t.frames=e,t.source=o.assets[e[0]].source,t.sourceX=o.assets[e[0]].frame.x,t.sourceY=o.assets[e[0]].frame.y,t.width=o.assets[e[0]].frame.w,t.height=o.assets[e[0]].frame.h,t.sourceWidth=o.assets[e[0]].frame.w,t.sourceHeight=o.assets[e[0]].frame.h):(t.tilesetFrame=o.assets[e],t.source=t.tilesetFrame.source,t.sourceX=t.tilesetFrame.frame.x,t.sourceY=t.tilesetFrame.frame.y,t.width=t.tilesetFrame.frame.w,t.height=t.tilesetFrame.frame.h,t.sourceWidth=t.tilesetFrame.frame.w,t.sourceHeight=t.tilesetFrame.frame.h)},t.setTexture(e),t.gotoAndStop=function(e){if(!(t.frames.length>0))throw new Error("Frame number "+e+"doesn't exist");t.frames[0]instanceof Array?(t.sourceX=t.frames[e][0],t.sourceY=t.frames[e][1]):o.assets[t.frames[e]].frame&&(t.source=o.assets[t.frames[e]].source,t.sourceX=o.assets[t.frames[e]].frame.x,t.sourceY=o.assets[t.frames[e]].frame.y,t.sourceWidth=o.assets[t.frames[e]].frame.w,t.sourceHeight=o.assets[t.frames[e]].frame.h,t.width=o.assets[t.frames[e]].frame.w,t.height=o.assets[t.frames[e]].frame.h),t._currentFrame=e},t.x=0,t.y=0,t.frames.length>0&&(o.addStatePlayer(t),Object.defineProperty(t,"currentFrame",{get:function(){return t._currentFrame},enumerable:!1,configurable:!1})),o.stage.addChild(t),t.render=function(e){e.drawImage(t.source,t.sourceX,t.sourceY,t.sourceWidth,t.sourceHeight,-t.width*t.pivotX,-t.height*t.pivotY,t.width,t.height)},t},o.button=function(e){var t=o.sprite(e);return t.subtype="button",h(t),t},o.image=function(e){return o.assets[e]},o.json=function(e){return o.assets[e]},o.addStatePlayer=function(e){var t=0,n=0,i=0,a=0,r=void 0,o=!1;function s(s){l(),i=s[0],a=s[1],n=a-i,0===i&&(n+=1,t+=1),1===n&&(n=2,t+=1),e.fps||(e.fps=12);var c=1e3/e.fps;e.gotoAndStop(i),o||(r=setInterval(function(){t<n?(e.gotoAndStop(e.currentFrame+1),t+=1):e.loop&&(e.gotoAndStop(i),t=1)}.bind(this),c),o=!0)}function l(){void 0!==r&&!0===o&&(o=!1,t=0,i=0,a=0,n=0,clearInterval(r))}e.show=function(t){l(),"string"!=typeof t?e.gotoAndStop(t):e.gotoAndStop(e.frames.indexOf(t))},e.play=function(){s([0,e.frames.length-1])},e.stop=function(){l(),e.gotoAndStop(e.currentFrame)},e.playing=o,e.playSequence=s},o.render=function(e,t){var n=e.ctx;n.clearRect(0,0,e.width,e.height);for(var i=0;i<o.stage.children.length;i++){a(o.stage.children[i])}function a(i){if(i.visible&&i.gx<e.width+i.width&&i.gx+i.width>=-i.width&&i.gy<e.height+i.height&&i.gy+i.height>=-i.height){if(n.save(),o.interpolate?(void 0!==i._previousX?i.renderX=(i.x-i._previousX)*t+i._previousX:i.renderX=i.x,void 0!==i._previousY?i.renderY=(i.y-i._previousY)*t+i._previousY:i.renderY=i.y):(i.renderX=i.x,i.renderY=i.y),n.translate(i.renderX+i.width*i.pivotX,i.renderY+i.height*i.pivotY),n.globalAlpha=i.alpha,n.rotate(i.rotation),n.scale(i.scaleX,i.scaleY),i.shadow&&(n.shadowColor=i.shadowColor,n.shadowOffsetX=i.shadowOffsetX,n.shadowOffsetY=i.shadowOffsetY,n.shadowBlur=i.shadowBlur),i.blendMode&&(n.globalCompositeOperation=i.blendMode),i.render&&i.render(n),i.children&&i.children.length>0){n.translate(-i.width*i.pivotX,-i.height*i.pivotY);for(var r=0;r<i.children.length;r++){a(i.children[r])}}n.restore()}}},o.assets={toLoad:0,loaded:0,imageExtensions:["png","jpg","gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],whenLoaded:void 0,load:function(e){console.log("Loading assets...");var t=this;t.toLoad=e.length,e.forEach(function(e){var n=e.split(".").pop();if(-1!==t.imageExtensions.indexOf(n)){var i=new Image;i.addEventListener("load",function(){i.name=e,t[i.name]={source:i,frame:{x:0,y:0,w:i.width,h:i.height}},t.loadHandler()},!1),i.src=e}else if(-1!==t.fontExtensions.indexOf(n)){var a=e.split("/").pop().split(".")[0],r=document.createElement("style"),s="@font-face {font-family: '"+a+"'; src: url('"+e+"');}";r.appendChild(document.createTextNode(s)),document.head.appendChild(r),t.loadHandler()}else if(-1!==t.audioExtensions.indexOf(n)){var l=o.makeSound(e,t.loadHandler.bind(t));l.name=e,t[l.name]=l}else if(-1!==t.jsonExtensions.indexOf(n)){var c=new XMLHttpRequest,d={};c.open("GET",e,!0),c.addEventListener("readystatechange",function(){200===c.status&&4===c.readyState&&((d=JSON.parse(c.responseText)).name=e,t[d.name]=d,d.frames?t.createTilesetFrames(d,e):t.loadHandler())}),c.send()}else console.log("File type not recognized: "+e)})},createTilesetFrames:function(e,t){var n=this,i=t.replace(/[^\/]*$/,""),a=new Image;a.addEventListener("load",function(){n[i+e.meta.image]={source:a,frame:{x:0,y:0,w:a.width,h:a.height}},Object.keys(e.frames).forEach(function(t){n[t]=e.frames[t],n[t].source=a}),n.loadHandler()},!1),a.src=i+e.meta.image},loadHandler:function(){this.loaded+=1,console.log(this.loaded),this.toLoad===this.loaded&&(this.toLoad=0,this.loaded=0,this.whenLoaded())}},o.keyboard=f,o.makeDisplayObject=d,void 0!==n.plugins&&n.plugins(o),void 0!==n.custom&&n.custom(o),o},window.ga=n.create,function(e,t,n){"use strict";function i(e){e&&(e.setTargetAtTime||(e.setTargetAtTime=e.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return i(e.gain),e},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(e){var t=e?this.internal_createDelay(e):this.internal_createDelay();return i(t.delayTime),t},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.start||(e.start=function(e,t,n){t||n?this.noteGrainOn(e,t,n):this.noteOn(e)}),e.stop||(e.stop=e.noteOff),i(e.playbackRate),e},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return i(e.threshold),i(e.knee),i(e.ratio),i(e.reduction),i(e.attack),i(e.release),e},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();return i(e.frequency),i(e.detune),i(e.Q),i(e.gain),e},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();return e.start||(e.start=e.noteOn),e.stop||(e.stop=e.noteOff),i(e.frequency),i(e.detune),e}))}(window),function(e){"use strict";var t,n,i={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},a=i.w3;for(n in i)if(i[n].enabled in e){t=i[n];break}function r(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!1),n.dispatchEvent(i)}a.enabled in e||!t||(e.addEventListener(t.events.change,function(n){e[a.enabled]=e[t.enabled],e[a.element]=e[t.element],r(a.events.change,n.target)},!1),e.addEventListener(t.events.error,function(e){r(a.events.error,e.target)},!1),e[a.enabled]=e[t.enabled],e[a.element]=e[t.element],e[a.exit]=e[t.exit],Element.prototype[a.request]=function(){return this[t.request].apply(this,arguments)})}(document),(n=n||{}).plugins=function(e){function t(e){e.x+=0|e.vx,e.y+=0|e.vy}e.move=function(e){if(e instanceof Array==!1)t(e);else for(var n=0;n<e.length;n++)t(e[n])},e.distance=function(e,t){var n=t.centerX-e.centerX,i=t.centerY-e.centerY;return Math.sqrt(n*n+i*i)},e.followEase=function(e,t,n){var i=t.centerX-e.centerX,a=t.centerY-e.centerY;Math.sqrt(i*i+a*a)>=1&&(e.x+=i*n,e.y+=a*n)},e.followConstant=function(e,t,n){var i=t.centerX-e.centerX,a=t.centerY-e.centerY,r=Math.sqrt(i*i+a*a);r>=n&&(e.x+=i/r*n,e.y+=a/r*n)},e.rotateAroundSprite=function(e,t,n,i){e.x=t.centerX-e.parent.x+n*Math.cos(i)-e.halfWidth,e.y=t.centerY-e.parent.y+n*Math.sin(i)-e.halfWidth},e.rotateAroundPoint=function(e,t,n,i,a){var r={};return r.x=e+Math.cos(a)*n,r.y=t+Math.sin(a)*i,r},e.angle=function(e,t){return Math.atan2(t.centerY-e.centerY,t.centerX-e.centerX)},e.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.randomFloat=function(e,t){return e+Math.random()*(t-e)},e.wait=function(e,t){return setTimeout(t,e)},e.worldCamera=function(e,t){return{width:t.width,height:t.height,_x:0,_y:0,get x(){return this._x},set x(t){this._x=t,e.x=-this._x,e._previousX=e.x},get y(){return this._y},set y(t){this._y=t,e.y=-this._y,e._previousY=e.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow:function(t){t.x<this.leftInnerBoundary&&(this.x=t.x-this.width/4),t.y<this.topInnerBoundary&&(this.y=t.y-this.height/4),t.x+t.width>this.rightInnerBoundary&&(this.x=t.x+t.width-this.width/4*3),t.y+t.height>this.bottomInnerBoundary&&(this.y=t.y+t.height-this.height/4*3),this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>e.width&&(this.x=e.width-this.width),this.y+this.height>e.height&&(this.y=e.height-this.height)},centerOver:function(e){this.x=e.x+e.halfWidth-this.width/2,this.y=e.y+e.halfHeight-this.height/2}}},e.scaleToWindow=function(t){var n,i,a,r,o;t=t||"#2C3539",n=window.innerWidth/e.canvas.width,i=window.innerHeight/e.canvas.height,a=Math.min(n,i),e.canvas.style.transformOrigin="0 0",e.canvas.style.transform="scale("+a+")","horizontally"===(r=e.canvas.width>e.canvas.height?e.canvas.width*a<window.innerWidth?"horizontally":"vertically":e.canvas.height*a<window.innerHeight?"vertically":"horizontally")&&(o=(window.innerWidth-e.canvas.width*a)/2,e.canvas.style.marginLeft=o+"px",e.canvas.style.marginRight=o+"px"),"vertically"===r&&(o=(window.innerHeight-e.canvas.height*a)/2,e.canvas.style.marginTop=o+"px",e.canvas.style.marginBottom=o+"px"),e.canvas.style.paddingLeft=0,e.canvas.style.paddingRight=0,e.canvas.style.paddingTop=0,e.canvas.style.paddingBottom=0,e.canvas.style.display="block",document.body.style.backgroundColor=t,e.pointer.scale=a,e.scale=a,e.canvas.scaled=!0;var s=navigator.userAgent.toLowerCase();-1!=s.indexOf("safari")&&(s.indexOf("chrome")>-1||(e.canvas.style.maxHeight="100%",e.canvas.style.minHeight="100%"))},e.scaleToFit=function(t,n){var i,a,r;"width"===t&&(i=e.canvas.width/window.innerWidth,a=e.canvas.height/window.innerHeight),"height"===t&&(i=window.innerWidth/e.canvas.width,a=window.innerHeight/e.canvas.height),r=Math.min(i,a),e.canvas.style.transformOrigin="0 0",e.canvas.style.transform="scale("+r+")",document.body.style.backgroundColor=n,e.canvas.style.paddingLeft=0,e.canvas.style.paddingRight=0,e.canvas.style.marginLeft="auto",e.canvas.style.marginRight="auto",e.canvas.style.display="block",e.canvas.style.minHeight="100%";var o=navigator.userAgent.toLowerCase();-1!=o.indexOf("safari")&&(o.indexOf("chrome")>-1||(e.canvas.style.maxHeight="100%",e.canvas.style.minHeight="100%")),e.scale=r},e.shakingSprites=[],e.updateShakingSprites=function(){if(e.shakingSprites.length>0)for(var t=e.shakingSprites.length-1;t>=0;t--){var n=e.shakingSprites[t];n.updateShake&&n.updateShake()}},e.updateFunctions.push(e.updateShakingSprites),e.shake=function(t,n,i){void 0===n&&(n=16),void 0===i&&(i=!1);var a=1,r=10,o=t.x,s=t.y,l=t.rotation,c=n/r,d=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};-1===e.shakingSprites.indexOf(t)&&(e.shakingSprites.push(t),t.updateShake=function(){i?function(){a<r&&(t.rotation=l,n-=c,t.rotation=n*u,a+=1,u*=-1);a>=r&&(t.rotation=l,e.shakingSprites.splice(e.shakingSprites.indexOf(t),1))}():function(){a<r&&(t.x=o,t.y=s,n-=c,t.x+=d(-n,n),t.y+=d(-n,n),a+=1);a>=r&&(t.x=o,t.y=s,e.shakingSprites.splice(e.shakingSprites.indexOf(t),1))}()});var u=1},e.tweens=[],e.updateTweens=function(){if(e.tweens.length>0)for(var t=e.tweens.length-1;t>=0;t--){var n=e.tweens[t];n&&n.update()}},e.updateFunctions.push(e.updateTweens),e.cubicBezier=function(e,t,n,i,a){var r=e*e;return t+(3*-t+e*(3*t-t*e))*e+(3*n+e*(-6*n+3*n*e))*e+(3*i-3*i*e)*r+a*(r*e)};var n={linear:function(e){return e},smoothstep:function(e){return e*e*(3-2*e)},smoothstepSquared:function(e){return Math.pow(e*e*(3-2*e),2)},smoothstepCubed:function(e){return Math.pow(e*e*(3-2*e),3)},acceleration:function(e){return e*e},accelerationCubed:function(e){return Math.pow(e*e,3)},deceleration:function(e){return 1-Math.pow(1-e,2)},decelerationCubed:function(e){return 1-Math.pow(1-e,3)},sine:function(e){return Math.sin(e*Math.PI/2)},sineSquared:function(e){return Math.pow(Math.sin(e*Math.PI/2),2)},sineCubed:function(e){return Math.pow(Math.sin(e*Math.PI/2),2)},inverseSine:function(e){return 1-Math.sin((1-e)*Math.PI/2)},inverseSineSquared:function(e){return 1-Math.pow(Math.sin((1-e)*Math.PI/2),2)},inverseSineCubed:function(e){return 1-Math.pow(Math.sin((1-e)*Math.PI/2),3)},spline:function(e,t,n,i,a){return.5*(2*n+(-t+i)*e+(2*t-5*n+4*i-a)*e*e+(3*n-t-3*i+a)*e*e*e)}};e.tweenProperty=function(t,i,a,r,o,s,l,c){void 0===o&&(o=60),void 0===s&&(s="smoothstep"),void 0===l&&(l=!1),void 0===c&&(c=0);var d={},u=s.split(" ");return"bounce"===u[0]&&(d.startMagnitude=parseInt(u[1]),d.endMagnitude=parseInt(u[2])),d.start=function(t,n){d.startValue=JSON.parse(JSON.stringify(t)),d.endValue=JSON.parse(JSON.stringify(n)),d.playing=!0,d.totalFrames=o,d.frameCounter=0,e.tweens.push(d)},d.start(a,r),d.update=function(){var e;if(d.playing)if(d.frameCounter<d.totalFrames){var a=d.frameCounter/d.totalFrames;e="bounce"!==u[0]?n[s](a):n.spline(a,d.startMagnitude,0,1,d.endMagnitude),t[i]=d.endValue*e+d.startValue*(1-e),d.frameCounter+=1}else d.end()},d.end=function(){d.playing=!1,d.onComplete&&d.onComplete(),e.tweens.splice(e.tweens.indexOf(d),1),l&&e.wait(c,function(){d.start(d.endValue,d.startValue)})},d.play=function(){d.playing=!0},d.pause=function(){d.playing=!1},d},e.fadeOut=function(t,n){return void 0===n&&(n=60),e.tweenProperty(t,"alpha",t.alpha,0,n,"sine")},e.fadeIn=function(t,n){return void 0===n&&(n=60),e.tweenProperty(t,"alpha",t.alpha,1,n,"sine")},e.pulse=function(t,n,i){return void 0===n&&(n=60),void 0===i&&(i=0),e.tweenProperty(t,"alpha",t.alpha,i,n,"smoothstep",!0)},e.makeTween=function(t){var n={tweens:[]};t.forEach(function(t){var i=e.tweenProperty(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);n.tweens.push(i)});var i=0;return n.completed=function(){(i+=1)===n.tweens.length&&(n.onComplete&&n.onComplete(),i=0)},n.tweens.forEach(function(e){e.onComplete=function(){n.completed()}}),n.pause=function(){n.tweens.forEach(function(e){e.playing=!1})},n.play=function(){n.tweens.forEach(function(e){e.playing=!0})},n},e.slide=function(t,n,i,a,r,o,s){return void 0===a&&(a=60),void 0===r&&(r="smoothstep"),void 0===o&&(o=!1),void 0===s&&(s=0),e.makeTween([[t,"x",t.x,n,a,r,o,s],[t,"y",t.y,i,a,r,o,s]])},e.breathe=function(t,n,i,a,r,o){return void 0===a&&(a=60),void 0===r&&(r=!0),void 0===o&&(o=0),e.makeTween([[t,"scaleX",t.scaleX,n,a,"smoothstepSquared",r,o],[t,"scaleY",t.scaleY,i,a,"smoothstepSquared",r,o]])},e.scale=function(t,n,i,a){return void 0===a&&(a=60),e.makeTween([[t,"scaleX",t.scaleX,n,a,"smoothstep",!1],[t,"scaleY",t.scaleY,i,a,"smoothstep",!1]])},e.strobe=function(t,n,i,a,r,o,s){void 0===n&&(n=1.3),void 0===i&&(i=10),void 0===a&&(a=20),void 0===r&&(r=10),void 0===o&&(o=!0),void 0===s&&(s=0);var l="bounce "+i+" "+a;return e.makeTween([[t,"scaleX",t.scaleX,n,r,l,o,s],[t,"scaleY",t.scaleY,n,r,l,o,s]])},e.wobble=function(t,n,i,a,r,o,s,l,c,d,u){void 0===n&&(n=1.2),void 0===i&&(i=1.2),void 0===a&&(a=10),void 0===r&&(r=10),void 0===o&&(o=10),void 0===s&&(s=-10),void 0===l&&(l=-10),void 0===c&&(c=.98),void 0===d&&(d=!0),void 0===u&&(u=0);var h="bounce "+r+" "+o,f="bounce "+s+" "+l,p=e.makeTween([[t,"scaleX",t.scaleX,n,a,h,d,u],[t,"scaleY",t.scaleY,i,a,f,d,u]]);return p.tweens.forEach(function(t){t.onComplete=function(){t.endValue>1&&(t.endValue*=c,t.endValue<=1&&(t.endValue=1,e.removeTween(t)))}}),p},e.removeTween=function(t){t.tweens?(t.pause(),t.tweens.forEach(function(t){e.tweens.splice(e.tweens.indexOf(t),1)})):(t.pause(),e.tweens.splice(e.tweens.indexOf(t),1))},e.followCurve=function(t,i,a,r,o,s){void 0===r&&(r="smoothstep"),void 0===o&&(o=!1),void 0===s&&(s=0);var l={},c=r.split(" ");return"bounce"===c[0]&&(l.startMagnitude=parseInt(c[1]),l.endMagnitude=parseInt(c[2])),l.start=function(t){l.playing=!0,l.totalFrames=a,l.frameCounter=0,l.pointsArray=JSON.parse(JSON.stringify(t)),e.tweens.push(l)},l.start(i),l.update=function(){var i,a,o=l.pointsArray;l.playing&&(l.frameCounter<l.totalFrames?(i=l.frameCounter/l.totalFrames,a="bounce"!==c[0]?n[r](i):n.spline(i,l.startMagnitude,0,1,l.endMagnitude),t.x=e.cubicBezier(a,o[0][0],o[1][0],o[2][0],o[3][0]),t.y=e.cubicBezier(a,o[0][1],o[1][1],o[2][1],o[3][1]),l.frameCounter+=1):l.end())},l.end=function(){l.playing=!1,l.onComplete&&l.onComplete(),e.tweens.splice(e.tweens.indexOf(l),1),o&&e.wait(s,function(){l.pointsArray=l.pointsArray.reverse(),l.start(l.pointsArray)})},l.pause=function(){l.playing=!1},l.play=function(){l.playing=!0},l},e.walkPath=function(t,n,i,a,r,o,s){void 0===i&&(i=300),void 0===a&&(a="smoothstep"),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=0);var l=JSON.parse(JSON.stringify(n)),c=i/l.length;return function n(i){var d=e.makeTween([[t,"x",l[i][0],l[i+1][0],c,a],[t,"y",l[i][1],l[i+1][1],c,a]]);d.onComplete=function(){(i+=1)<l.length-1?e.wait(s,function(){d=n(i)}):r&&(o&&l.reverse(),e.wait(s,function(){i=0,t.x=l[0][0],t.y=l[0][1],d=n(i)}))};return d}(0)},e.walkCurve=function(t,n,i,a,r,o,s){void 0===i&&(i=300),void 0===a&&(a="smoothstep"),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=0);var l=i/n.length;return function i(c){var d=e.followCurve(t,n[c],l,a);d.onComplete=function(){(c+=1)<n.length?e.wait(s,function(){d=i(c)}):r&&(o&&(n.reverse(),n.forEach(function(e){e.reverse()})),e.wait(s,function(){c=0,t.x=n[0][0],t.y=n[0][1],d=i(c)}))};return d}(0)},e.shoot=function(e,t,n,i,a,r){var o=r();return o.x=e.centerX-o.halfWidth+n*Math.cos(t),o.y=e.centerY-o.halfHeight+n*Math.sin(t),o.vx=Math.cos(t)*i,o.vy=Math.sin(t)*i,a.push(o),o},e.grid=function(t,n,i,a,r,o,s,l,c){void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=32),void 0===a&&(a=32),void 0===o&&(o=0),void 0===s&&(s=0),void 0===r&&(r=!1);var d=e.group();return d.createGrid=function(){for(var e=t*n,u=0;u<e;u++){var h=u%t*i,f=Math.floor(u/t)*a,p=l();d.addChild(p),r?(p.x=h+i/2-p.halfWidth+o,p.y=f+a/2-p.halfHeight+s):(p.x=h+o,p.y=f+s),c&&c(p)}},d.createGrid(),e.stage.addChild(d),d},e.progressBar={maxWidth:0,height:0,backgroundColor:"gray",foregroundColor:"cyan",backBar:null,frontBar:null,percentage:null,assets:null,initialized:!1,create:function(t,n){this.initialized||(this.assets=n,this.maxWidth=e.canvas.width/2,this.backBar=e.rectangle(this.maxWidth,32,this.backgroundColor),this.backBar.x=e.canvas.width/2-this.maxWidth/2,this.backBar.y=e.canvas.height/2-16,this.frontBar=e.rectangle(this.maxWidth,32,this.foregroundColor),this.frontBar.x=e.canvas.width/2-this.maxWidth/2,this.frontBar.y=e.canvas.height/2-16,this.percentage=e.text("0%","28px sans-serif","black"),this.percentage.x=e.canvas.width/2-this.maxWidth/2+12,this.percentage.y=e.canvas.height/2-12,this.initialized=!0)},update:function(){var t=(e.assets.loaded+1)/e.assets.toLoad;this.frontBar.width=this.maxWidth*t,this.percentage.content=Math.floor(100*t)+"%"},remove:function(){e.remove(this.frontBar),e.remove(this.backBar),e.remove(this.percentage)}},e.particles=[],e.particleEffect=function(t,n,i,a,r,o,s,l,c,d,u,h,f,p,g,v,y,m){void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=function(){return e.circle(10,"red")}),void 0===a&&(a=10),void 0===r&&(r=0),void 0===o&&(o=!0),void 0===s&&(s=0),void 0===l&&(l=6.28),void 0===c&&(c=4),void 0===d&&(d=16),void 0===u&&(u=.1),void 0===h&&(h=1),void 0===f&&(f=.01),void 0===p&&(p=.05),void 0===g&&(g=.02),void 0===v&&(v=.02),void 0===y&&(y=.01),void 0===m&&(m=.03);for(var x,w=function(e,t){return e+Math.random()*(t-e)},b=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},S=[],C=(l-s)/(a-1),T=0;T<a;T++)o?(x=w(s,l),S.push(x)):(void 0===x&&(x=s),S.push(x),x+=C);S.forEach(function(a){!function(a){var o=i();o.frames.length>0&&o.gotoAndStop(b(0,o.frames.length-1));o.x=t-o.halfWidth,o.y=n-o.halfHeight;var s=b(c,d);o.width=s,o.height=s,o.scaleSpeed=w(f,p),o.alphaSpeed=w(g,v),o.rotationSpeed=w(y,m);var l=w(u,h);o.vx=l*Math.cos(a),o.vy=l*Math.sin(a),o.updateParticle=function(){o.vy+=r,o.x+=o.vx,o.y+=o.vy,o.scaleX-o.scaleSpeed>0&&(o.scaleX-=o.scaleSpeed),o.scaleY-o.scaleSpeed>0&&(o.scaleY-=o.scaleSpeed),o.rotation+=o.rotationSpeed,o.alpha-=o.alphaSpeed,o.alpha<=0&&(e.remove(o),e.particles.splice(e.particles.indexOf(o),1))},e.particles.push(o)}(a)})},e.updateParticles=function(){if(e.particles.length>0)for(var t=e.particles.length-1;t>=0;t--){e.particles[t].updateParticle()}},e.updateFunctions.push(e.updateParticles),e.emitter=function(e,t){var n={},i=void 0;return n.playing=!1,n.play=function(){n.playing||(t(),i=setInterval(function(){t()}.bind(this),e),n.playing=!0)},n.stop=function(){n.playing&&(clearInterval(i),n.playing=!1)},n},e.tilingSprite=function(t,n,i,a,r){var o,s,l,c;void 0===a&&(a=0),void 0===r&&(r=0),e.assets[i].frame?(o=e.assets[i].frame.w,s=e.assets[i].frame.h):(o=e.assets[i].width,s=e.assets[i].height),l=t>=o?Math.round(t/o)+1:2,c=n>=s?Math.round(n/s)+1:2;var d=e.grid(l,c,o,s,!1,0,0,function(){return e.sprite(i)});d._tileX=0,d._tileY=0;var u=e.rectangle(t,n,"none","none");return u.x=a,u.y=r,u.mask=!0,u.addChild(d),Object.defineProperties(u,{tileX:{get:function(){return d._tileX},set:function(e){d.children.forEach(function(t){var n=e-d._tileX;t.x+=n,t.x>(l-1)*o&&(t.x=0-o+n),t.x<0-o-n&&(t.x=(l-1)*o)}),d._tileX=e},enumerable:!0,configurable:!0},tileY:{get:function(){return d._tileY},set:function(e){d.children.forEach(function(t){var n=e-d._tileY;t.y+=n,t.y>(c-1)*s&&(t.y=0-s+n),t.y<0-s-n&&(t.y=(c-1)*s)}),d._tileY=e},enumerable:!0,configurable:!0}}),u},e.burst=function(t,n,i,a,r,o,s,l,c,d,u,h,f,p){var g;for(t=t||0,n=n||0,i=i||function(){return e.circle(10,"red")},r=r||4,o=o||16,a=a||10,s=s||.1,l=l||1,c=c||.01,d=d||.05,u=u||.02,h=h||.02,f=f||.01,p=p||.03,g=0;g<360;g+=Math.round(360/a))v();function v(){var a=i();a.x=t-a.halfWidth,a.y=n-a.halfHeight;var v=e.randomFloat(r,o);a.width=v,a.height=v,a.scaleSpeed=e.randomFloat(c,d),a.alphaSpeed=e.randomFloat(u,h),a.rotationSpeed=e.randomFloat(f,p);var y=e.randomFloat(s,l);a.vx=y*Math.cos(g*Math.PI/180),a.vy=y*Math.sin(g*Math.PI/180),a.update=function(){a.x+=a.vx,a.y+=a.vy,a.scaleX-a.scaleSpeed>0&&(a.scaleX-=a.scaleSpeed),a.scaleY-a.scaleSpeed>0&&(a.scaleY-=a.scaleSpeed),a.rotation+=a.rotationSpeed,a.alpha-=a.alphaSpeed,a.alpha<=0&&(e.remove(a),e.particles.splice(e.particles.indexOf(a),1))},e.particles.push(a)}},e.outsideBounds=function(e,t,n){var i,a=t.x,r=t.y,o=t.width,s=t.height;return e.x<a-e.width&&(i="left"),e.y<r-e.height&&(i="top"),e.x>o&&(i="right"),e.y>s&&(i="bottom"),i&&n&&n(i),i},e.contain=function(e,t,n,i){var a,r=t.x,o=t.y,s=t.width,l=t.height;return n=n||!1,e.x<r&&(n&&(e.vx*=-1),e.mass&&(e.vx/=e.mass),e.x=r,a="left"),e.y<o&&(n&&(e.vy*=-1),e.mass&&(e.vy/=e.mass),e.y=o,a="top"),e.x+e.width>s&&(n&&(e.vx*=-1),e.mass&&(e.vx/=e.mass),e.x=s-e.width,a="right"),e.y+e.height>l&&(n&&(e.vy*=-1),e.mass&&(e.vy/=e.mass),e.y=l-e.height,a="bottom"),a&&i&&i(a),a},e.hitTestPoint=function(e,t){var n,i,a,r,o,s,l,c;return"rectangle"===(n=t.radius?"circle":"rectangle")&&(i=t.x,a=t.x+t.width,r=t.y,o=t.y+t.height,c=e.x>i&&e.x<a&&e.y>r&&e.y<o),"circle"===n&&(s=e.x-t.centerX,l=e.y-t.centerY,c=Math.sqrt(s*s+l*l)<t.radius),c},e.hitTestCircle=function(e,t,n){var i,a;return void 0===n&&(n=!1),n?(i=t.gx+t.radius-(e.gx+e.radius),a=t.gy+t.radius-(e.gy+e.radius)):(i=t.centerX-e.centerX,a=t.centerY-e.centerY),Math.sqrt(i*i+a*a)<e.radius+t.radius},e.hitTestRectangle=function(e,t,n){var i,a,r,o;return void 0===n&&(n=!1),!1,n?(r=e.gx+e.halfWidth-(t.gx+t.halfWidth),o=e.gy+e.halfHeight-(t.gy+t.halfHeight)):(r=e.centerX-t.centerX,o=e.centerY-t.centerY),i=e.halfWidth+t.halfWidth,a=e.halfHeight+t.halfHeight,Math.abs(r)<i&&Math.abs(o)<a},e.hitTestCircleRectangle=function(t,n,i){var a,r,o,s,l,c;if(void 0===i&&(i=!1),i?(o=t.gx,s=t.gy,l=n.gx,c=n.gy):(o=t.x,s=t.y,l=n.x,c=n.y),"topMiddle"===(a=s<c-n.halfHeight?o<l-1-n.halfWidth?"topLeft":o>l+1+n.halfWidth?"topRight":"topMiddle":s>c+n.halfHeight?o<l-1-n.halfWidth?"bottomLeft":o>l+1+n.halfWidth?"bottomRight":"bottomMiddle":o<l-n.halfWidth?"leftMiddle":"rightMiddle")||"bottomMiddle"===a||"leftMiddle"===a||"rightMiddle"===a)r=e.hitTestRectangle(t,n,i);else{var d={};switch(a){case"topLeft":d.x=l,d.y=c;break;case"topRight":d.x=l+n.width,d.y=c;break;case"bottomLeft":d.x=l,d.y=c+n.height;break;case"bottomRight":d.x=l+n.width,d.y=c+n.height}r=e.hitTestCirclePoint(t,d,i)}return r?a:r},e.hitTestCirclePoint=function(t,n,i){return void 0===i&&(i=!1),n.diameter=1,n.radius=.5,n.centerX=n.x,n.centerY=n.y,n.gx=n.x,n.gy=n.y,e.hitTestCircle(t,n,i)},e.rectangleCollision=function(e,t,n,i){var a,r,o,s,l,c,d;return void 0===n&&(n=!1),void 0===i&&(i=!1),i?(c=e.gx+e.halfWidth-(t.gx+t.halfWidth),d=e.gy+e.halfHeight-(t.gy+t.halfHeight)):(c=e.centerX-t.centerX,d=e.centerY-t.centerY),r=e.halfWidth+t.halfWidth,o=e.halfHeight+t.halfHeight,Math.abs(c)<r&&Math.abs(d)<o&&((s=r-Math.abs(c))>=(l=o-Math.abs(d))?(d>0?(a="top",e.y=e.y+l):(a="bottom",e.y=e.y-l),n&&(e.vy*=-1)):(c>0?(a="left",e.x=e.x+s):(a="right",e.x=e.x-s),n&&(e.vx*=-1))),a},e.circleCollision=function(e,t,n,i){var a,r,o,s,l,c,d,u={},h=!1;if(void 0===n&&(n=!0),void 0===i&&(i=!1),i?(s=t.gx+t.radius-(e.gx+e.radius),l=t.gy+t.radius-(e.gy+e.radius)):(s=t.centerX-e.centerX,l=t.centerY-e.centerY),(a=Math.sqrt(s*s+l*l))<(r=e.radius+t.radius)){h=!0,o=r-a;o+=.3,c=s/a,d=l/a,e.x-=o*c,e.y-=o*d,n&&(u.x=l,u.y=-s,function(e,t){var n,i,a={},r={},o={},s=e.mass||1;t.lx=t.y,t.ly=-t.x,t.magnitude=Math.sqrt(t.x*t.x+t.y*t.y),t.dx=t.x/t.magnitude,t.dy=t.y/t.magnitude,n=e.vx*t.dx+e.vy*t.dy,a.vx=n*t.dx,a.vy=n*t.dy,i=e.vx*(t.lx/t.magnitude)+e.vy*(t.ly/t.magnitude),r.vx=i*(t.lx/t.magnitude),r.vy=i*(t.ly/t.magnitude),r.vx*=-1,r.vy*=-1,o.x=a.vx+r.vx,o.y=a.vy+r.vy,e.vx=o.x/s,e.vy=o.y/s}(e,u))}return h},e.movingCircleCollision=function(e,t,n){var i,a,r,o,s={},l={},c={},d={},u={},h=!1;if(e.mass=e.mass||1,t.mass=t.mass||1,void 0===n&&(n=!1),n?(s.vx=t.gx+t.radius-(e.gx+e.radius),s.vy=t.gy+t.radius-(e.gy+e.radius)):(s.vx=t.centerX-e.centerX,s.vy=t.centerY-e.centerY),s.magnitude=Math.sqrt(s.vx*s.vx+s.vy*s.vy),i=e.radius+t.radius,s.magnitude<i){h=!0,a=i-s.magnitude,a+=.3,s.dx=s.vx/s.magnitude,s.dy=s.vy/s.magnitude,s.vxHalf=Math.abs(s.dx*a/2),s.vyHalf=Math.abs(s.dy*a/2),r=e.x>t.x?1:-1,o=e.y>t.y?1:-1,e.x=e.x+s.vxHalf*r,e.y=e.y+s.vyHalf*o,t.x=t.x+s.vxHalf*-r,t.y=t.y+s.vyHalf*-o,s.lx=s.vy,s.ly=-s.vx;var f=e.vx*s.dx+e.vy*s.dy;l.x=f*s.dx,l.y=f*s.dy;var p=e.vx*(s.lx/s.magnitude)+e.vy*(s.ly/s.magnitude);c.x=p*(s.lx/s.magnitude),c.y=p*(s.ly/s.magnitude);var g=t.vx*s.dx+t.vy*s.dy;d.x=g*s.dx,d.y=g*s.dy;var v=t.vx*(s.lx/s.magnitude)+t.vy*(s.ly/s.magnitude);u.x=v*(s.lx/s.magnitude),u.y=v*(s.ly/s.magnitude),e.bounce={},e.bounce.x=c.x+d.x,e.bounce.y=c.y+d.y,t.bounce={},t.bounce.x=l.x+u.x,t.bounce.y=l.y+u.y,e.vx=e.bounce.x/e.mass,e.vy=e.bounce.y/e.mass,t.vx=t.bounce.x/t.mass,t.vy=t.bounce.y/t.mass}return h},e.multipleCircleCollision=function(t,n){void 0===n&&(n=!1);for(var i=0;i<t.length;i++)for(var a=t[i],r=i+1;r<t.length;r++){var o=t[r];e.movingCircleCollision(a,o,n)}},e.circlePointCollision=function(t,n,i,a){return void 0===a&&(a=!1),void 0===i&&(i=!1),n.diameter=1,n.radius=.5,n.centerX=n.x,n.centerY=n.y,n.gx=n.x,n.gy=n.y,e.circleCollision(t,n,i,a)},e.circleRectangleCollision=function(t,n,i,a){var r,o,s,l,c,d;if(void 0===a&&(a=!1),void 0===i&&(i=!1),a?(s=t.gx,l=t.gy,c=n.gx,d=n.gy):(s=t.x,l=t.y,c=n.x,d=n.y),"topMiddle"===(r=l<d-n.halfHeight?s<c-1-n.halfWidth?"topLeft":s>c+1+n.halfWidth?"topRight":"topMiddle":l>d+n.halfHeight?s<c-1-n.halfWidth?"bottomLeft":s>c+1+n.halfWidth?"bottomRight":"bottomMiddle":s<c-n.halfWidth?"leftMiddle":"rightMiddle")||"bottomMiddle"===r||"leftMiddle"===r||"rightMiddle"===r)o=e.rectangleCollision(t,n,i,a);else{var u={};switch(r){case"topLeft":u.x=c,u.y=d;break;case"topRight":u.x=c+n.width,u.y=d;break;case"bottomLeft":u.x=c,u.y=d+n.height;break;case"bottomRight":u.x=c+n.width,u.y=d+n.height}o=e.circlePointCollision(t,u,i,a)}return o?r:o},e.hit=function(t,n,i,a,r,o){var s;return i=i||!1,a=a||!1,r=r||!1,n instanceof Array||t instanceof Array?function(){if(t instanceof Array){var e=t;n=t,t=e}for(var i=n.length-1;i>=0;i--){var a=n[i];(s=l(t,a))&&o&&o(s,a)}}():(s=l(t,n))&&o&&o(s),s;function l(t,n){var o=void 0!==t.parent,s=void 0!==n.parent;if(o&&s)return t.diameter&&n.diameter?function(t,n){return i?t.vx+t.vy!==0&&n.vx+n.vy!==0?e.movingCircleCollision(t,n,r):e.circleCollision(t,n,a,r):e.hitTestCircle(t,n,r)}(t,n):t.diameter&&!n.diameter?function(t,n){return i?e.circleRectangleCollision(t,n,a,r):e.hitTestCircleRectangle(t,n,r)}(t,n):function(t,n){return i?a?e.rectangleCollision(t,n,!0,r):e.rectangleCollision(t,n,!1,r):e.hitTestRectangle(t,n,r)}(t,n);if(s&&void 0!==t.x&&void 0!==t.y)return e.hitTestPoint(t,n);throw new Error("I'm sorry, "+t+" and "+n+" cannot be use together in a collision test.")}},e.getIndex=function(e,t,n,i,a){var r={};return r.x=Math.floor(e/n),r.y=Math.floor(t/i),r.x+r.y*a},e.getTile=function(e,t,n){var i={};return i.gid=t[e],i.width=n.tilewidth,i.height=n.tileheight,i.halfWidth=n.tilewidth/2,i.halfHeight=n.tileheight/2,i.x=e%n.widthInTiles*n.tilewidth+n.x,i.y=Math.floor(e/n.widthInTiles)*n.tileheight+n.y,i.gx=i.x,i.gy=i.y,i.centerX=i.x+n.tilewidth/2,i.centery=i.y+n.tileheight/2,i},e.surroundingCells=function(e,t){return[e-t-1,e-t,e-t+1,e-1,e,e+1,e+t-1,e+t,e+t+1]},e.getPoints=function(e){var t=e.collisionArea;return void 0!==t?{topLeft:{x:e.x+t.x,y:e.y+t.y},topRight:{x:e.x+t.x+t.width,y:e.y+t.y},bottomLeft:{x:e.x+t.x,y:e.y+t.y+t.height},bottomRight:{x:e.x+t.x+t.width,y:e.y+t.y+t.height}}:{topLeft:{x:e.x,y:e.y},topRight:{x:e.x+e.width-1,y:e.y},bottomLeft:{x:e.x,y:e.y+e.height-1},bottomRight:{x:e.x+e.width-1,y:e.y+e.height-1}}},e.hitTestTile=function(t,n,i,a,r){var o={};switch(r=r||"some"){case"center":var s={center:{x:t.centerX,y:t.centerY}};t.collisionPoints=s,o.hit=Object.keys(t.collisionPoints).some(l);break;case"every":t.collisionPoints=e.getPoints(t),o.hit=Object.keys(t.collisionPoints).every(l);break;case"some":t.collisionPoints=e.getPoints(t),o.hit=Object.keys(t.collisionPoints).some(l)}function l(r){var s=t.collisionPoints[r];return o.index=e.getIndex(s.x,s.y,a.tilewidth,a.tileheight,a.widthInTiles),o.gid=n[o.index],o.gid===i}return o},e.updateMap=function(t,n,i){var a=t.map(function(e){return 0,0});if(n instanceof Array)n.forEach(function(t){t.index=e.getIndex(t.centerX,t.centerY,i.tilewidth,i.tileheight,i.widthInTiles),a[t.index]=t.gid});else{var r=n;r.index=e.getIndex(r.centerX,r.centerY,i.tilewidth,i.tileheight,i.widthInTiles),a[r.index]=r.gid}return a},e.fourKeyController=function(t,n,i,a,r,o){t.direction="",leftArrow=e.keyboard(o),upArrow=e.keyboard(i),rightArrow=e.keyboard(a),downArrow=e.keyboard(r),leftArrow.press=function(){t.vx=-n,t.vy=0,t.direction="left"},leftArrow.release=function(){rightArrow.isDown||0!==t.vy||(t.vx=0)},upArrow.press=function(){t.vy=-n,t.vx=0,t.direction="up"},upArrow.release=function(){downArrow.isDown||0!==t.vx||(t.vy=0)},rightArrow.press=function(){t.vx=n,t.vy=0,t.direction="right"},rightArrow.release=function(){leftArrow.isDown||0!==t.vy||(t.vx=0)},downArrow.press=function(){t.vy=n,t.vx=0,t.direction="down"},downArrow.release=function(){upArrow.isDown||0!==t.vx||(t.vy=0)}},e.makeTiledWorld=function(t,n){t=e.json(t);var i=e.group();i.tileheight=t.tileheight,i.tilewidth=t.tilewidth,i.width=t.width*t.tilewidth,i.height=t.height*t.tileheight,i.widthInTiles=t.width,i.heightInTiles=t.height,i.objects=[];var a=t.tilesets[0].spacing,r=Math.floor(t.tilesets[0].imagewidth/(t.tilewidth+a));return t.layers.forEach(function(o){var s=e.group();Object.keys(o).forEach(function(e){"width"!==e&&"height"!==e&&(s[e]=o[e])}),s.alpha=o.opacity,i.addChild(s),i.objects.push(s),"tilelayer"===o.type&&o.data.forEach(function(o,l){var c,d,u,h,f,p,g,v,y,m;if(0!==o){g=l%i.widthInTiles,v=Math.floor(l/i.widthInTiles),u=g*i.tilewidth,h=v*i.tileheight,y=(o-1)%r,m=Math.floor((o-1)/r),f=y*i.tilewidth,p=m*i.tileheight,a>0&&(f+=a+a*((o-1)%r),p+=a+a*Math.floor((o-1)/r)),d=e.frame(n,f,p,i.tilewidth,i.tileheight);var x=t.tilesets[0].tileproperties,w=String(o-1);x[w]&&x[w].name?(c=e.sprite(d),Object.keys(x[w]).forEach(function(e){c[e]=x[w][e]}),i.objects.push(c)):c=e.sprite(d),c.x=u,c.y=h,c.index=l,c.gid=o,s.addChild(c)}}),"objectgroup"===o.type&&o.objects.forEach(function(e){e.group=s,s.width=i.width,s.height=i.height,i.objects.push(e)})}),i.getObject=function(e){return this.searchForObject=function(){var t;if(i.objects.some(function(n){if(n.name&&n.name===e)return t=n,!0}),t)return t;console.log("There is no object with the property name: "+e)},this.searchForObject()},i.getObjects=function(e){var t=Array.prototype.slice.call(arguments),n=[];return i.objects.forEach(function(e){e.name&&-1!==t.indexOf(e.name)&&n.push(e)}),n.length>0?n:(console.log("I could not find those objects"),n)},i},e.fullscreenScale=1,e.requestFullScreen=function(){document.fullscreenEnabled||e.canvas.requestFullscreen()},e.exitFullScreen=function(){document.fullscreenEnabled&&document.exitFullscreen()},e.alignFullscreen=function(){var t,n;if(t=screen.width/e.canvas.width,n=screen.height/e.canvas.height,e.fullscreenScale=Math.min(t,n),0===document.styleSheets.length){var i=document.createElement("div");i.innerHTML="<style></style>",document.body.appendChild(i)}var a=navigator.userAgent.toLowerCase();e.canvas.width>e.canvas.height?-1!==a.indexOf("safari")||-1!==a.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain}",0):-1!==a.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==a.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==a.indexOf("explorer")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==a.indexOf("safari")||-1!==a.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==a.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==a.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==a.indexOf("msie")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {height: 100%; margin: 0 auto; object-fit: contain;}",0)},e.enableFullscreen=function(t){t&&(t=Array.prototype.slice.call(arguments)),e.alignFullscreen(),e.canvas.addEventListener("mouseup",e.requestFullScreen,!1),e.canvas.addEventListener("touchend",e.requestFullScreen,!1),t&&t.forEach(function(t){window.addEventListener("keyup",function(n){n.keyCode===t&&e.exitFullScreen(),n.preventDefault()},!1)})},e.launchFullscreen=function(t){e.hitTestPoint(e.pointer.position,t)&&e.enableFullscreen()},e.scaleFullscreen=function(){document.fullscreenEnabled?(e.scale=e.fullscreenScale,e.pointer.scale=e.fullscreenScale):e.canvas.scaled||(e.scale=1,e.pointer.scale=1)},e.updateFunctions.push(e.scaleFullscreen),e.actx=new AudioContext,e.makeSound=function(t,n){var i={},a=e.actx;return i.volumeNode=e.actx.createGain(),a.createStereoPanner?i.panNode=a.createStereoPanner():i.panNode=a.createPanner(),i.delayNode=a.createDelay(),i.feedbackNode=a.createGain(),i.filterNode=a.createBiquadFilter(),i.convolverNode=a.createConvolver(),i.soundNode=null,i.buffer=null,i.source=null,i.loop=!1,i.playing=!1,i.loadHandler=void 0,i.panValue=0,i.volumeValue=1,i.startTime=0,i.startOffset=0,i.playbackRate=1,i.echo=!1,i.delayValue=.3,i.feebackValue=.3,i.filterValue=0,i.reverb=!1,i.reverbImpulse=null,i.play=function(){i.startTime=a.currentTime,i.soundNode=a.createBufferSource(),i.soundNode.buffer=i.buffer,i.soundNode.playbackRate.value=this.playbackRate,i.soundNode.connect(i.volumeNode),!1===i.reverb?i.volumeNode.connect(i.panNode):(i.volumeNode.connect(i.convolverNode),i.convolverNode.connect(i.panNode),i.convolverNode.buffer=i.reverbImpulse),i.panNode.connect(a.destination),i.echo&&(i.feedbackNode.gain.value=i.feebackValue,i.delayNode.delayTime.value=i.delayValue,i.filterNode.frequency.value=i.filterValue,i.delayNode.connect(i.feedbackNode),i.filterValue>0?(i.feedbackNode.connect(i.filterNode),i.filterNode.connect(i.delayNode)):i.feedbackNode.connect(i.delayNode),i.volumeNode.connect(i.delayNode),i.delayNode.connect(i.panNode)),i.soundNode.loop=i.loop,i.soundNode.start(0,i.startOffset%i.buffer.duration),i.playing=!0},i.pause=function(){i.playing&&(i.soundNode.stop(0),i.startOffset+=a.currentTime-i.startTime,i.playing=!1)},i.restart=function(){i.playing&&i.soundNode.stop(0),i.startOffset=0,i.play()},i.playFrom=function(e){i.playing&&i.soundNode.stop(0),i.startOffset=e,i.play()},i.setEcho=function(e,t,n){void 0===e&&(e=.3),void 0===t&&(t=.3),void 0===n&&(n=0),i.delayValue=e,i.feebackValue=t,i.filterValue=n,i.echo=!0},i.setReverb=function(t,n,r){void 0===t&&(t=2),void 0===n&&(n=2),void 0===r&&(r=!1),i.reverbImpulse=e.impulseResponse(t,n,r,a),i.reverb=!0},i.fade=function(e,t){i.playing&&(i.volumeNode.gain.linearRampToValueAtTime(i.volumeNode.gain.value,a.currentTime),i.volumeNode.gain.linearRampToValueAtTime(e,a.currentTime+t))},i.fadeIn=function(e){i.volumeNode.gain.value=0,i.fade(1,e)},i.fadeOut=function(e){i.fade(0,e)},Object.defineProperties(i,{volume:{get:function(){return i.volumeValue},set:function(e){i.volumeNode.gain.value=e,i.volumeValue=e},enumerable:!0,configurable:!0},pan:{get:function(){return a.createStereoPanner?i.panNode.pan.value:i.panValue},set:function(e){if(a.createStereoPanner)i.panNode.pan.value=e;else{var t=e,n=1-Math.abs(t);i.panNode.setPosition(t,0,n),i.panValue=e}},enumerable:!0,configurable:!0}}),i.load=function(){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.addEventListener("load",function(){a.decodeAudioData(e.response,function(e){i.buffer=e,i.hasLoaded=!0,n&&n()},function(e){throw new Error("Audio could not be decoded: "+e)})}),e.send()},i.load(),i},e.sound=function(t){return e.assets[t]},e.soundEffect=function(t,n,i,a,r,o,s,l,c,d,u,h,f){void 0===t&&(t=200),void 0===n&&(n=0),void 0===i&&(i=1),void 0===a&&(a="sine"),void 0===r&&(r=1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=!1),void 0===d&&(d=0),void 0===u&&(u=0),void 0===h&&(h=void 0),void 0===f&&(f=void 0);var p,g,v,y,m=e.actx;p=m.createOscillator(),g=m.createGain(),v=m.createStereoPanner?m.createStereoPanner():m.createPanner(),p.connect(g),g.connect(v),v.connect(m.destination),g.gain.value=r,m.createStereoPanner?v.pan.value=o:v.setPosition(o,0,1-Math.abs(o)),p.type=a;function x(t){var n=m.createConvolver();n.buffer=e.impulseResponse(f[0],f[1],f[2],m),t.connect(n),n.connect(v)}function w(e){var t=m.createGain(),n=m.createDelay(),i=m.createBiquadFilter();n.delayTime.value=h[0],t.gain.value=h[1],h[2]&&(i.frequency.value=h[2]),n.connect(t),h[2]?(t.connect(i),i.connect(n)):t.connect(n),e.connect(n),n.connect(v)}function b(e){e.gain.value=0,e.gain.linearRampToValueAtTime(0,m.currentTime+s),e.gain.linearRampToValueAtTime(r,m.currentTime+s+n)}function S(e){e.gain.linearRampToValueAtTime(r,m.currentTime+n+s),e.gain.linearRampToValueAtTime(0,m.currentTime+s+n+i)}function C(e){var t=e.frequency.value;c?(e.frequency.linearRampToValueAtTime(t,m.currentTime+s),e.frequency.linearRampToValueAtTime(t+l,m.currentTime+s+n+i)):(e.frequency.linearRampToValueAtTime(t,m.currentTime+s),e.frequency.linearRampToValueAtTime(t-l,m.currentTime+s+n+i))}function T(e){e.start(m.currentTime+s)}y=d>0?function(e,t){return Math.floor(Math.random()*(t-e+1))+e}(t-d/2,t+d/2):t,p.frequency.value=y,n>0&&b(g),S(g),l>0&&C(p),h&&w(g),f&&x(g),u>0&&function(){var e=m.createOscillator(),t=m.createOscillator(),a=m.createGain(),o=m.createGain();a.gain.value=r,o.gain.value=r,e.connect(a),a.connect(m.destination),t.connect(o),o.connect(m.destination),e.type="sawtooth",t.type="sawtooth",e.frequency.value=y+u,t.frequency.value=y-u,n>0&&(b(a),b(o));i>0&&(S(a),S(o));l>0&&(C(e),C(t));h&&(w(a),w(o));f&&(x(a),x(o));T(e),T(t)}(),T(p)},e.impulseResponse=function(e,t,n,i){for(var a=i.sampleRate*e,r=i.createBuffer(2,a,i.sampleRate),o=r.getChannelData(0),s=r.getChannelData(1),l=0;l<a;l++){var c;c=n?a-l:l,o[l]=(2*Math.random()-1)*Math.pow(1-c/a,t),s[l]=(2*Math.random()-1)*Math.pow(1-c/a,t)}return r}}},function(e,t,n){"use strict";n.r(t);n(14);const i=3,a="#000002",r="#87d62b",o=-1,s=-1,l=60,c="#131313",d=40,u=[{type:"Image",path:"images/image.png"},{type:"Video",path:"images/video.png"},{type:"Text",path:"images/text.png"},{type:"Sound",path:"images/sound.png"}],h=0,f=40,p=8,g=200;var v=n(4),y=n.n(v),m=n(5),x=n.n(m),w=n(0),b=n.n(w),S=n(1),C=n.n(S),T=n(2),k=n.n(T),M=n(3),O=n.n(M),A=n(6),_=n.n(A),E=n(10),P=n.n(E),F=n(11),H=n.n(F),X=n(12),Y=n.n(X),I=n(13),W=n.n(I),R=n(7),N=n.n(R),D=n(8),B=n.n(D),L=n(9),j=n.n(L);const q=ga(800,500,function(){q.canvas.background=a,Q=q.group(),(U=q.text("THE BADASS ROUTER OFFLINE","40px sans-serif","#E91E63")).x=80,U.y=q.canvas.height/2-U.halfHeight,K=q.group(U),Z=q.rectangle(q.canvas.width,l,c),u.forEach(function(e,t){const n=q.sprite(e.path);n.x=(d+4*t)*(t+1),n.y=Z.height/2-n.halfHeight,n.scaleX=.8,n.scaleY=.8,n.alpha=0,n.on=!1,n.type=e.type,te.push(n)});const e=q.rectangle(g,16,a),t=q.rectangle(g,16,r);(ee=q.group(e,t)).inner=t,ee.x=q.canvas.width-ee.width-10,ee.y=Z.height/2-ee.halfHeight,(V=q.sprite(y.a)).x=20,V.y=q.canvas.height/2-V.halfHeight,Q.addChild(V),z=q.sound(B.a),G=q.sound(j.a),q.fourKeyController(V,i,38,39,40,37),(J=q.text("THE BADASS ROUTER OFFLINE","40px sans-serif","#E91E63")).x=20,J.y=q.canvas.height/2-U.halfHeight,($=q.group(J)).visible=!1,q.key.space.press=function(){q.shoot(V,h,f,p,pe,function(){const e=q.sprite(x.a);return Q.addChild(e),e}),z.play()},Q.visible=!1,q.wait(1500,function(){q.state=me})},[y.a,b.a,C.a,k.a,O.a,_.a,x.a,B.a,j.a,N.a,P.a,H.a,Y.a,W.a]);let V,z,G,J,U,K,Q,$,Z,ee;q.start();let te=[],ne=80,ie=0,ae=100,re=0,oe=80,se=0,le=200,ce=0,de=!1,ue=!1,he=(b.a,C.a,k.a,O.a,null),fe=[],pe=[],ge=[],ve=[];let ye=!1;function me(){ye||(q.fadeOut(U),q.wait(1500,function(){q.fadeIn(U),U.x=20,U.content="20,000 years in the future...",q.wait(1500,function(){q.fadeIn(U),U.content="an evil neural network put everyone offline",q.wait(1500,function(){q.fadeIn(U),U.content="Now the only hope is...",q.wait(1500,function(){q.fadeIn(U),U.content="a baddass PINK router...",q.wait(1500,function(){q.fadeIn(U),U.content="with a thirst for revenge",q.wait(1e3,function(){q.state=xe})})})})})}),ye=!0)}function xe(){let e=!1;if(K.visible=!1,Q.visible=!0,de?ue&&q.move(V):q.move(V),q.contain(V,q.stage.localBounds),de?ue&&q.move(pe):q.move(pe),V.y<=l&&(V.y=l),q.move(ve),(ie+=1)===ne&&-1===te.findIndex(e=>"Video"===e.type&&e.on)&&!he){const e=q.sprite(b.a);e.x=q.canvas.width+e.width,e.y=q.randomInt(l,q.canvas.height-e.height),e.itemType="Image",e.itemPath="images/image.png",e.itemDrop=20,e.type="facebook",e.speed=2,e.vx=s*e.speed,e.lives=2,e.health=e.lives,ie=0,fe.push(e),Q.addChild(e)}if(-1!==te.findIndex(e=>"Image"===e.type&&e.on)&&(re+=1),re===ae){const e=q.sprite(C.a);e.x=q.canvas.width+e.width,e.y=q.randomInt(l,q.canvas.height-e.height),e.itemType="Video",e.itemPath="images/video.png",e.itemDrop=10,e.type="gamepad",e.frames=15,e.movementFrames=e.frames,e.speed=3,e.vy=o*e.speed,e.vx=s*e.speed,e.lives=2,e.health=e.lives,re=0,fe.push(e),Q.addChild(e)}if(-1!==te.findIndex(e=>"Video"===e.type&&e.on)&&(se+=1),se===oe&&!he){const e=q.sprite(k.a);e.x=q.canvas.width+e.width,e.y=q.randomInt(l,q.canvas.height-e.height),e.itemType="Text",e.itemPath="images/text.png",e.itemDrop=50,e.type="wikipedia",e.speed=1,e.vx=s*e.speed,e.lives=5,e.health=e.lives,e.bullets=[],se=0,fe.push(e),Q.addChild(e)}if(-1!==te.findIndex(e=>"Text"===e.type&&e.on)&&(ce+=1),ce===le&&!he){const e=q.sprite(O.a);e.x=q.canvas.width+e.width,e.y=q.randomInt(l,q.canvas.height-e.height),e.itemType="Sound",e.itemPath="images/sound.png",e.itemDrop=40,e.type="spotify",e.speed=5,e.vx=s*e.speed,e.lives=3,e.health=e.lives,e.bullets=[],ce=0,fe.push(e),Q.addChild(e)}if(-1===te.findIndex(e=>"Sound"===e.type&&e.on)||he||((he=q.sprite(_.a)).scaleX=1.5,he.scaleY=1.5,he.x=q.canvas.width+he.width,he.y=q.canvas.height/2-he.halfHeight,he.itemType="Sound",he.itemPath="images/sound.png",he.itemDrop=0,he.type="boss",he.speed=1,he.vx=s*he.speed,he.lives=50,he.health=he.lives,he.bullets=[],he.followFrecuency=100,he.followTimer=0,fe.push(he),Q.addChild(he)),he){if(he.vx=he.x<=q.canvas.width-2*he.width?0:he.vx,!de){const e=q.text("Badass Router: This the boss? WHAT THE FORK!....","20px sans-serif");e.x=10,e.y=q.canvas.height-5*e.height,q.wait(2e3,function(){e.content="Neural Evil: ...",q.wait(2e3,function(){e.content="Neural Evil: My original plan was to wait for you at the last level, but let's forget it and just fight",q.wait(2e3,function(){e.content="Badass Router:ok Fine, mister evil data, let's do it. ",q.wait(2e3,function(){e.content="",ue=!0})})})}),de=!0}de&&ue&&q.followEase(he,V,.01)}fe=fe.filter(function(t){let n="left"===q.contain(t,q.stage.localBounds)||t.health<=0;if(n||(pe=pe.filter(function(e){return!q.hitTestRectangle(t,e)||(q.shake(t),t.health-=1,Q.removeChild(e),!1)})),n){if(q.randomInt(0,100)<=t.itemDrop){const e=-1!==ge.findIndex(e=>e.type===t.itemType),n=-1!==te.findIndex(e=>e.type===t.itemType&&e.on);if(!e&&!n){const e=q.sprite(t.itemPath);e.x=t.x,e.y=t.y,e.type=t.itemType,e.vx=s,ge.push(e),Q.addChild(e)}}if(t.health<=0){G.play();const e=q.sprite(N.a);e.x=t.x,e.y=t.y,t.visible=!1,q.wait(500,function(){t.vx=0,q.remove(e),Q.removeChild(t)})}else t.vx=0,Q.removeChild(t);return!1}return q.hitTestRectangle(V,t)&&(e=!0),"gamepad"===t.type&&(t.movementFrames>0?t.movementFrames-=1:(t.vy*=-1,t.movementFrames=t.frames)),!0}),ge=ge.filter(function(e){let t="left"===q.contain(e,q.stage.localBounds);if(q.hitTestRectangle(e,V)){const n=te.find(t=>t.type===e.type);n.alpha=1,n.on=!0,t=!0}return!t||(e.vx=0,Q.removeChild(e),!1)}),q.move(fe),q.move(ge),e?(V.alpha=.5,ee.inner.width-=1):V.alpha=1,ee.inner.width<=0&&(q.state=we,J.content="You lost!"),he&&he.health<=0&&(q.state=we,J.content="You Win!",q.wait(2e3,function(){J.x=0,J.content="The neural network has been destroyed. Now the world returns to peace"}))}function we(){q.stage.putCenter(J),Q.visible=!1,$.visible=!0}}]);
//# sourceMappingURL=index.js.map